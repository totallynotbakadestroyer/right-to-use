{"version":3,"sources":["components/MetadataFields.js","services/fileService.js","components/Form.js","components/AuthInfo.js","App.js","index.js"],"names":["MetadataFields","metadataFields","handleMetadataPayload","addField","map","x","placeholder","onChange","event","id","value","name","onClick","baseURL","uploadFile","file","payload","auth","a","preventDefault","data","FormData","accessToken","formDataPayload","append","JSON","stringify","upload","axios","post","responseType","response","fileSaver","Form","setAuth","fileInput","createRef","useState","folderName","metadata","setPayload","handlePayload","isCheckBox","target","type","checked","action","onSubmit","current","files","htmlFor","ref","el","index","length","clientId","process","buttonText","onSuccess","scope","AuthInfo","profileObj","email","App","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.ebb1a799.chunk.js","sourcesContent":["import React from \"react\";\n\nconst MetadataFields = ({\n  metadataFields,\n  handleMetadataPayload,\n  addField,\n}) => {\n  return (\n    <div>\n      <div>Metadata fields</div>\n      {metadataFields.map((x) => {\n        return (\n          <div key={x.id}>\n            <label>\n              xmp:\n              <input\n                placeholder={\"tag name\"}\n                onChange={(event) => handleMetadataPayload(event, x.id)}\n                value={x.name}\n                name={\"name\"}\n              />\n              =\n              <input\n                placeholder={\"value\"}\n                name={\"data\"}\n                onChange={(event) => handleMetadataPayload(event, x.id)}\n              />\n            </label>\n          </div>\n        );\n      })}\n      <button onClick={addField}>Add field</button>\n    </div>\n  );\n};\n\nexport default MetadataFields;\n","import axios from \"axios\";\nimport fileSaver from \"file-saver\";\nconst baseURL = \"/upload\";\n\nconst uploadFile = async (event, file, payload, auth) => {\n  event.preventDefault();\n  const data = new FormData();\n  const accessToken = auth ? auth.accessToken : null;\n  const formDataPayload = { ...payload, accessToken };\n  data.append(\"payload\", JSON.stringify(formDataPayload));\n  data.append(\"file\", file);\n  if (!payload.upload) {\n    const response = await axios.post(baseURL, data, {\n      responseType: \"blob\",\n    });\n    return fileSaver(response.data, file.name);\n  }\n  await axios.post(baseURL, data);\n};\n\nexport default uploadFile;\n","import { GoogleLogin } from \"react-google-login\";\nimport React, { createRef, useState } from \"react\";\nimport MetadataFields from \"./MetadataFields\";\nimport uploadFile from \"../services/fileService.js\";\n\nconst Form = ({ setAuth, auth }) => {\n  const fileInput = createRef();\n  const [payload, setPayload] = useState({\n    upload: false,\n    folderName: \"\",\n    metadata: [\n      {\n        name: \"BuyerId\",\n        data: \"\",\n        id: 0,\n      },\n    ],\n  });\n  const handlePayload = (event) => {\n    const isCheckBox = event.target.type === \"checkbox\";\n    setPayload({\n      ...payload,\n      [event.target.name]: isCheckBox\n        ? event.target.checked\n        : event.target.value,\n    });\n  };\n  const handleMetadataPayload = (event, id) => {\n    setPayload({\n      ...payload,\n      metadata: payload.metadata.map((el) =>\n        el.id === id ? { ...el, [event.target.name]: event.target.value } : el\n      ),\n    });\n  };\n  const addField = (event) => {\n    event.preventDefault();\n    setPayload({\n      ...payload,\n      metadata: [\n        ...payload.metadata,\n        { name: \"NewField\", data: \"\", index: payload.metadata.length },\n      ],\n    });\n  };\n\n  return (\n    <form\n      action={\"upload\"}\n      onSubmit={(event) =>\n        uploadFile(event, fileInput.current.files[0], payload, auth)\n      }\n    >\n      <div>\n        <label htmlFor={\"file\"}>\n          Picture to mark\n          <input ref={fileInput} id={\"file\"} name={\"file\"} type={\"file\"} />\n        </label>\n      </div>\n      <MetadataFields\n        metadataFields={payload.metadata}\n        handleMetadataPayload={handleMetadataPayload}\n        addField={addField}\n      />\n      {payload.upload ? (\n        <div>\n          <label htmlFor={\"folder-name\"}>\n            Folder name\n            <input\n              id={\"folder-name\"}\n              name={\"folderName\"}\n              onChange={(event) => handlePayload(event)}\n            />\n          </label>\n        </div>\n      ) : null}\n      <div>\n        <label htmlFor={\"upload-drive\"}>\n          Upload to google drive?\n          <input\n            id={\"upload-drive\"}\n            onChange={(event) => handlePayload(event)}\n            name={\"upload\"}\n            type={\"checkbox\"}\n          />\n        </label>\n      </div>\n      {auth || !payload.upload ? (\n        <button type={\"submit\"}>mark picture</button>\n      ) : (\n        <GoogleLogin\n          clientId={process.env.REACT_APP_GOOGLE_CLIENT_ID}\n          buttonText=\"Login\"\n          onSuccess={(response) => setAuth(response)}\n          scope={\"https://www.googleapis.com/auth/drive.appdata\"}\n        />\n      )}\n    </form>\n  );\n};\n\nexport default Form;\n","const AuthInfo = ({ auth, setAuth }) => {\n  if (!auth) {\n    return null;\n  }\n  return (\n    <div>\n      <h2>\n        Logged as {auth.profileObj.email}{\" \"}\n        <button onClick={() => setAuth(null)}>Logout?</button>\n      </h2>\n    </div>\n  );\n};\nexport default AuthInfo;\n","import \"./App.css\";\nimport React, { useState } from \"react\";\nimport Form from \"./components/Form.js\";\nimport AuthInfo from \"./components/AuthInfo.js\";\n\nconst App = () => {\n  const [auth, setAuth] = useState(null);\n\n  return (\n    <div>\n      <AuthInfo auth={auth} setAuth={setAuth} />\n      <Form setAuth={setAuth} auth={auth} />\n    </div>\n  );\n};\n\nexport default App;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport App from \"./App\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n"],"sourceRoot":""}